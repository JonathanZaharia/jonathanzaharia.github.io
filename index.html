<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pick a Boot â€” The Boot Spinning Gameshow</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@700;800&family=DM+Sans:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  /* ===== CONFIG NOTE ==============================================
     To update boots: edit the `options` array in the <script> block.
     Each entry has: label, currentPrice, originalPrice, img, url, value, updated
     "updated" is just a display string so visitors can see freshness.
  ================================================================ */

  :root {
    --bg: #050e1c;
    --card: #0b1628;
    --border: rgba(255,255,255,0.06);
    --accent: #ffd166;
    --accent2: #ff6b6b;
    --muted: #7a8fa8;
    --text: #ddeeff;
  }

  *, *::before, *::after { box-sizing: border-box; }

  body {
    margin: 0;
    min-height: 100vh;
    background: var(--bg);
    background-image:
      radial-gradient(ellipse 80% 50% at 50% -10%, rgba(255,209,102,0.08), transparent),
      radial-gradient(ellipse 60% 40% at 80% 90%, rgba(59,130,246,0.06), transparent);
    color: var(--text);
    font-family: 'DM Sans', system-ui, sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }

  .wrap {
    width: 100%;
    max-width: 1120px;
  }

  /* â”€â”€ Header â”€â”€ */
  header {
    display: flex;
    align-items: baseline;
    gap: 14px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }
  header h1 {
    margin: 0;
    font-family: 'Syne', sans-serif;
    font-size: clamp(18px, 2.5vw, 26px);
    font-weight: 800;
    letter-spacing: -0.5px;
  }
  .last-updated-badge {
    margin-left: auto;
    font-size: 12px;
    color: var(--muted);
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--border);
    padding: 4px 10px;
    border-radius: 999px;
  }

  /* â”€â”€ Stage layout â”€â”€ */
  .stage {
    display: flex;
    gap: 20px;
    align-items: flex-start;
    flex-wrap: wrap;
  }

  #stageLeft {
    flex: 0 1 500px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
  }

  /* â”€â”€ Lights â”€â”€ */
  #lights {
    width: 100%;
    height: 10px;
    display: flex;
    gap: 7px;
    justify-content: center;
    align-items: center;
  }
  .bulb {
    width: 11px;
    height: 11px;
    border-radius: 50%;
    background: #1a2535;
    transition: background 0.2s, box-shadow 0.2s;
  }

  /* â”€â”€ Canvas â”€â”€ */
  canvas {
    border-radius: 50%;
    display: block;
    box-shadow: 0 0 0 6px rgba(255,209,102,0.08), 0 20px 60px rgba(0,0,0,0.7);
  }

  /* â”€â”€ Spin button â”€â”€ */
  #spinBtn {
    padding: 13px 36px;
    border-radius: 999px;
    border: 0;
    background: var(--accent);
    color: #05110a;
    font-family: 'Syne', sans-serif;
    font-weight: 800;
    font-size: 15px;
    cursor: pointer;
    letter-spacing: 0.5px;
    box-shadow: 0 4px 20px rgba(255,209,102,0.35);
    transition: transform 0.1s, box-shadow 0.2s;
  }
  #spinBtn:hover { box-shadow: 0 6px 28px rgba(255,209,102,0.55); transform: translateY(-1px); }
  #spinBtn:active { transform: translateY(1px); }
  #spinBtn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

  /* â”€â”€ Right panel â”€â”€ */
  .right {
    flex: 1;
    min-width: 280px;
  }

  .host-line {
    font-family: 'Syne', sans-serif;
    font-weight: 700;
    font-size: 15px;
    color: #fff;
    margin-bottom: 6px;
    line-height: 1.4;
  }

  .tip-box {
    background: rgba(255,209,102,0.06);
    border: 1px solid rgba(255,209,102,0.14);
    border-radius: 10px;
    padding: 10px 14px;
    font-size: 13px;
    color: var(--accent);
    margin-bottom: 14px;
    min-height: 40px;
    transition: opacity 0.3s;
  }

  /* â”€â”€ Boot grid â”€â”€ */
  .section-label {
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: var(--muted);
    margin-bottom: 10px;
  }

  .options {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(135px, 1fr));
    gap: 8px;
  }

  .option {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 8px;
    cursor: pointer;
    transition: transform 0.15s, border-color 0.15s, box-shadow 0.15s;
    display: flex;
    gap: 8px;
    align-items: center;
  }
  .option:hover {
    transform: translateY(-4px);
    border-color: rgba(255,209,102,0.3);
    box-shadow: 0 6px 20px rgba(0,0,0,0.4);
  }
  .option img {
    width: 52px;
    height: 52px;
    object-fit: cover;
    border-radius: 7px;
    flex-shrink: 0;
    background: #0d1a2e;
  }
  .optMeta { display: flex; flex-direction: column; gap: 2px; min-width: 0; }
  .optTitle {
    font-weight: 600;
    font-size: 11.5px;
    line-height: 1.3;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  .optPrice { color: var(--muted); font-size: 11px; }
  .price-up { color: var(--accent2); font-size: 10px; }
  .price-same { color: var(--muted); font-size: 10px; }
  .badge {
    display: inline-block;
    font-size: 10px;
    padding: 2px 6px;
    border-radius: 999px;
    background: rgba(255,255,255,0.04);
    color: var(--muted);
    margin-top: 2px;
  }
  .badge.disc {
    background: rgba(255,107,107,0.12);
    color: var(--accent2);
  }

  /* â”€â”€ Modal â”€â”€ */
  .overlay {
    position: fixed;
    inset: 0;
    background: rgba(2,8,20,0.7);
    backdrop-filter: blur(4px);
    z-index: 50;
    display: none;
    align-items: center;
    justify-content: center;
  }
  .overlay.show { display: flex; }

  .modal {
    position: relative;
    background: linear-gradient(160deg, #0d1e35, #07111f);
    border: 1px solid rgba(255,209,102,0.18);
    border-radius: 16px;
    padding: 24px;
    width: 90%;
    max-width: 420px;
    box-shadow: 0 30px 80px rgba(0,0,0,0.85);
    animation: pop 0.28s cubic-bezier(0.2, 0.9, 0.2, 1) forwards;
  }

  @keyframes pop {
    from { opacity: 0; transform: scale(0.92) translateY(8px); }
    to   { opacity: 1; transform: scale(1) translateY(0); }
  }

  .closeBtn {
    position: absolute;
    top: 12px;
    right: 14px;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 50%;
    width: 30px;
    height: 30px;
    font-size: 18px;
    line-height: 1;
    color: var(--muted);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.15s, color 0.15s;
  }
  .closeBtn:hover { background: rgba(255,107,107,0.15); color: var(--accent2); }

  .modal-body {
    display: flex;
    gap: 16px;
    align-items: flex-start;
    margin-bottom: 16px;
  }
  .modal-img {
    width: 110px;
    height: 90px;
    object-fit: cover;
    border-radius: 10px;
    flex-shrink: 0;
    background: #0d1a2e;
  }
  .modal-info { flex: 1; }
  .win-label {
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--accent);
    margin-bottom: 4px;
  }
  .win-title {
    font-family: 'Syne', sans-serif;
    font-size: 16px;
    font-weight: 800;
    line-height: 1.3;
    margin-bottom: 6px;
  }
  .win-price { font-size: 13px; color: var(--muted); }
  .win-price strong { color: var(--text); }
  .win-tip {
    font-size: 12px;
    color: var(--accent);
    background: rgba(255,209,102,0.07);
    border: 1px solid rgba(255,209,102,0.12);
    border-radius: 8px;
    padding: 8px 12px;
    margin-bottom: 16px;
  }

  .modal-actions { display: flex; gap: 8px; }
  .btn {
    padding: 10px 20px;
    border-radius: 999px;
    border: 0;
    cursor: pointer;
    font-family: 'Syne', sans-serif;
    font-weight: 700;
    font-size: 13px;
    transition: transform 0.1s, box-shadow 0.15s;
  }
  .btn:active { transform: scale(0.97); }
  .btn.primary {
    background: var(--accent);
    color: #05110a;
    box-shadow: 0 4px 16px rgba(255,209,102,0.3);
  }
  .btn.primary:hover { box-shadow: 0 6px 24px rgba(255,209,102,0.5); }
  .btn.ghost {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--muted);
  }
  .btn.ghost:hover { border-color: rgba(255,255,255,0.15); color: var(--text); }

  /* â”€â”€ Footer â”€â”€ */
  footer {
    margin-top: 20px;
    text-align: center;
    color: var(--muted);
    font-size: 12px;
  }
  footer a { color: var(--muted); }

  @media (max-width: 860px) {
    .stage { flex-direction: column; align-items: center; }
    #stageLeft, .right { width: 100%; }
    canvas { width: 320px !important; height: 320px !important; }
  }
</style>
</head>
<body>
<div class="wrap">
  <header>
    <h1>ðŸ¥¾ Pick a Boot â€” The Gameshow</h1>
    <div class="last-updated-badge" id="globalUpdated">Prices last checked: see each boot</div>
  </header>

  <div class="stage">
    <div id="stageLeft">
      <div id="lights" aria-hidden="true"></div>
      <canvas id="wheel" width="480" height="480" aria-label="Spin wheel"></canvas>
      <button id="spinBtn">SPIN THE WHEEL</button>
    </div>

    <div class="right">
      <div class="host-line" id="hostLine">Hey â€” did you know I made this because someone owed me a pair of boots. Why boots? I have a problem.</div>
      <div class="tip-box" id="tipText">Loading tipâ€¦</div>
      <div class="section-label">All Boots â€” Click to Browse</div>
      <div id="options" class="options"></div>
    </div>
  </div>

  <footer>
    <a href="https://logwork.com/countdown-timer"
       class="countdown-timer"
       data-timezone="America/New_York"
       data-textcolor="#ffffff"
       data-date="2026-5-30 18:57">
       Sales End! (This Sale is Long Gone â€” I just really like the countdown. Maybe it's counting down to something Important. (it's not))
    </a>
  </footer>
</div>

<!-- Overlay + Modal -->
<div id="overlay" class="overlay" role="dialog" aria-modal="true" aria-labelledby="winTitle">
  <div class="modal" id="winnerModal">
    <button id="closeModal" class="closeBtn" aria-label="Close modal">Ã—</button>
    <div class="modal-body">
      <img id="winImg" class="modal-img" src="" alt="Winner boot" />
      <div class="modal-info">
        <div class="win-label">ðŸŽ‰ The Wheel Has Spoken</div>
        <div class="win-title" id="winTitle">â€”</div>
        <div class="win-price" id="winPrice"></div>
      </div>
    </div>
    <div class="win-tip" id="winTip"></div>
    <div class="modal-actions">
      <button class="btn primary" id="buyBtn">BUY NOW</button>
      <button class="btn ghost" id="spinAgainBtn">SPIN AGAIN</button>
    </div>
  </div>
</div>

<script src="https://cdn.logwork.com/widget/countdown.js" defer></script>
<script>
/* ===================================================================
   BOOT DATA â€” Edit here to update prices or add/remove boots.
   Fields:
     label         â€“ display name
     currentPrice  â€“ current price (number, used for wheel sizing)
     priceDisplay  â€“ shown to user, include notes like "(was $X)"
     originalPrice â€“ original price (or null if no change)
     discontinued  â€“ true/false
     img           â€“ path to image
     url           â€“ link to store page
     updated       â€“ string date, so visitors know freshness
=================================================================== */
const options = [
  {
    label: "Baobab â€“ Bronco Brown",
    currentPrice: 199.99,
    priceDisplay: "$199.99",
    originalPrice: null,
    discontinued: true,
    img: "assets/baobab.jpg",
    url: "https://jimgreenfootwear.com/store/baobab-boot-bronco/?attribute_pa_size=12",
    updated: "2025-01"
  },
  {
    label: "African Ranger â€“ Leather Midsole â€“ Bronco Brown",
    currentPrice: 229.99,
    priceDisplay: "$229.99",
    originalPrice: 169.99,
    discontinued: false,
    img: "assets/ar-bronco-leather.jpg",
    url: "https://jimgreenfootwear.com/store/african-ranger-bronco-leather-midsole/?attribute_pa_size=12",
    updated: "2025-01"
  },
  {
    label: "African Ranger â€“ Leather Midsole â€“ Houston Brown",
    currentPrice: 219.99,
    priceDisplay: "$219.99",
    originalPrice: 155.99,
    discontinued: false,
    img: "assets/ar-houston-leather.jpg",
    url: "https://jimgreenfootwear.com/store/african-ranger-houston-brown-leather-midsole/?attribute_pa_size=12",
    updated: "2025-01"
  },
  {
    label: "African Ranger â€“ Bronco Brown (Tyre Wedge)",
    currentPrice: 199.99,
    priceDisplay: "$199.99",
    originalPrice: 155.99,
    discontinued: false,
    img: "assets/ar-tyre.jpg",
    url: "https://jimgreenfootwear.com/store/african-ranger-tyre-wedge-bronco/?attribute_pa_size=12",
    updated: "2025-01"
  },
  {
    label: "719 â€“ Frog Grip Sole â€“ Bronco Brown",
    currentPrice: 269.99,
    priceDisplay: "$269.99",
    originalPrice: 129.99,
    discontinued: false,
    img: "assets/719-frog.jpg",
    url: "https://jimgreenfootwear.com/store/719-bronco/",
    updated: "2025-01"
  },
  {
    label: "719 â€“ Tyre Wedge â€“ Bronco Brown",
    currentPrice: 269.99,
    priceDisplay: "$269.99",
    originalPrice: 129.99,
    discontinued: false,
    img: "assets/719-tyre.jpg",
    url: "https://jimgreenfootwear.com/store/719-bronco-brown-tyre-wedge/",
    updated: "2025-01"
  },
  {
    label: "African Ranger â€“ Buffalo Skin",
    currentPrice: 240.00,
    priceDisplay: "$240.00",
    originalPrice: null,
    discontinued: false,
    img: "assets/ar-buffalo.jpg",
    url: "https://jimgreenfootwear.com/store/african-ranger-buffalo-skin/",
    updated: "2025-01"
  },
  {
    label: "African Ranger â€“ Leather Midsole â€“ Buffalo",
    currentPrice: 269.99,
    priceDisplay: "$269.99",
    originalPrice: null,
    discontinued: false,
    img: "assets/ar-buffalo-leather.jpg",
    url: "https://jimgreenfootwear.com/store/african-ranger-buffalo-leather-midsole/",
    updated: "2025-01"
  }
];

const tips = [
  "Tip: Consider sizing up â€” your toes deserve a little wiggle room to re-boot.",
  "Roast: Oofâ€¦ that price tag just kicked your wallet in the shins.",
  "Joke: Why did the boot break up with the sneaker? It needed more sole.",
  "Roast: That checkout total? Your wallet's about to go on a leather-only diet.",
  "Joke: These boots have more heel turn than a wrestling villain.",
  "Tip: Good boots won't solve your problems â€” but they'll help you tread through them.",
  "Roast: That purchase just laced up and stomped your bank account.",
  "Joke: I tried to save money, but these boots had other plans afoot.",
  "Roast: Your card just tapped out â€” submission by financial ankle lock.",
  "Tip: Break in your boots slowlyâ€¦ unlike your savings account.",
  "Joke: Why don't boots ever get lost? They always follow their sole.",
  "Roast: That was a bold move â€” your budget is now on life support.",
  "Tip: Tight laces, loose expectations, and maybe a payment plan.",
  "Joke: I bought new boots for hiking, but mostly they're for the climb in credit card debt.",
  "Roast: That total didn't just rise â€” it high-kicked your monthly budget.",
  "Tip: If the heel slips, tighten the laces. If your wallet slips, wellâ€¦ too late.",
  "Joke: These boots aren't made for walking â€” they're made for financial consequences.",
  "Roast: You said "treat yourself." Your bank account heard "defeat yourself."",
  "Tip: Buy once, cry onceâ€¦ preferably into quality leather.",
  "Joke: I told my wallet it was just browsing. It knew I was pulling its leg."
];

/* ===== Canvas Setup ===== */
const canvas = document.getElementById('wheel');
const ctx = canvas.getContext('2d');
const cx = canvas.width / 2, cy = canvas.height / 2;
const outerR = Math.min(cx, cy) - 10;
const innerR = 56;
let angle = 0;
let angularVelocity = 0;
let spinning = false;
const friction = 0.992;
const colors = ["#c0392b","#e67e22","#f1c40f","#27ae60","#1abc9c","#2980b9","#8e44ad","#e84393"];

const imgs = options.map(o => { const im = new Image(); im.src = o.img; return im; });

/* ===== Sounds ===== */
const spinSound = new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg");
const dingSound = new Audio("https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg");
spinSound.volume = 0.2;
dingSound.volume = 0.4;

/* ===== Draw ===== */
function drawWheel() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  const len = options.length;
  const arc = (Math.PI * 2) / len;
  const maxVal = Math.max(...options.map(o => o.currentPrice));

  for (let i = 0; i < len; i++) {
    const start = angle + i * arc;

    // Slice
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.arc(cx, cy, outerR, start, start + arc);
    ctx.closePath();
    ctx.fillStyle = colors[i % colors.length];
    ctx.globalAlpha = 0.85 + (options[i].currentPrice / maxVal) * 0.25;
    ctx.fill();
    ctx.globalAlpha = 1;

    // Divider
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.arc(cx, cy, outerR, start, start + arc);
    ctx.closePath();
    ctx.strokeStyle = "rgba(0,0,0,0.25)";
    ctx.lineWidth = 1.5;
    ctx.stroke();

    // Punch out inner
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.arc(cx, cy, innerR, start, start + arc, true);
    ctx.closePath();
    ctx.globalCompositeOperation = 'destination-out';
    ctx.fill();
    ctx.globalCompositeOperation = 'source-over';

    // Image
    const mid = start + arc / 2;
    const dist = (innerR + outerR) / 2 * 0.72;
    ctx.save();
    ctx.translate(cx + Math.cos(mid) * dist, cy + Math.sin(mid) * dist);
    ctx.rotate(mid + Math.PI / 2);
    ctx.drawImage(imgs[i], -26, -26, 52, 52);
    ctx.restore();
  }

  // Center hub
  ctx.beginPath();
  ctx.arc(cx, cy, innerR - 6, 0, Math.PI * 2);
  ctx.fillStyle = "#05111e";
  ctx.fill();
  ctx.beginPath();
  ctx.arc(cx, cy, 10, 0, Math.PI * 2);
  ctx.fillStyle = "rgba(255,209,102,0.6)";
  ctx.fill();

  // Pointer
  ctx.beginPath();
  ctx.moveTo(cx, cy - outerR - 4);
  ctx.lineTo(cx - 14, cy - outerR + 20);
  ctx.lineTo(cx + 14, cy - outerR + 20);
  ctx.closePath();
  ctx.fillStyle = "#ffd166";
  ctx.shadowColor = "#ffd166";
  ctx.shadowBlur = 10;
  ctx.fill();
  ctx.shadowBlur = 0;
}

/* ===== Animate ===== */
function animate() {
  if (spinning) {
    angularVelocity *= friction;
    if (Math.abs(angularVelocity) < 0.0008) {
      angularVelocity = 0;
      spinning = false;
      document.getElementById('spinBtn').disabled = false;
      setTimeout(onStop, 300);
    }
    angle += angularVelocity;
  }
  drawWheel();
  requestAnimationFrame(animate);
}

/* ===== Spin ===== */
function spin() {
  if (spinning) return;
  angularVelocity = (0.25 + Math.random() * 0.5) * (Math.random() > 0.5 ? 1 : -1);
  spinning = true;
  document.getElementById('spinBtn').disabled = true;
  spinSound.currentTime = 0;
  spinSound.play().catch(() => {});
  playVoice("Are you ready to spin?");
}

/* ===== Selected Index ===== */
function getSelectedIndex() {
  const len = options.length;
  const arc = (Math.PI * 2) / len;
  const pointer = -Math.PI / 2;
  const normalized = ((angle % (Math.PI * 2)) + Math.PI * 2) % (Math.PI * 2);
  const relative = (pointer - normalized + Math.PI * 2) % (Math.PI * 2);
  return Math.floor(relative / arc);
}

/* ===== Stop ===== */
function onStop() {
  const idx = getSelectedIndex();
  const opt = options[idx];
  if (!opt) return;
  flashSlice(idx);
  showWinnerModal(opt);
}

function flashSlice(idx) {
  const arc = (Math.PI * 2) / options.length;
  const start = angle + idx * arc;
  ctx.beginPath();
  ctx.moveTo(cx, cy);
  ctx.arc(cx, cy, outerR, start, start + arc);
  ctx.closePath();
  ctx.fillStyle = "rgba(255,255,255,0.18)";
  ctx.fill();
  dingSound.currentTime = 0;
  dingSound.play().catch(() => {});
  setTimeout(drawWheel, 500);
}

/* ===== Modal ===== */
function showWinnerModal(opt) {
  document.getElementById('winImg').src = opt.img;
  document.getElementById('winTitle').textContent = opt.label;
  const priceEl = document.getElementById('winPrice');
  if (opt.originalPrice) {
    priceEl.innerHTML = `<strong>${opt.priceDisplay}</strong> <span style="color:#ff6b6b;text-decoration:line-through;font-size:12px">was $${opt.originalPrice.toFixed(2)}</span>`;
  } else {
    priceEl.innerHTML = `<strong>${opt.priceDisplay}</strong>`;
  }
  document.getElementById('winTip').textContent = randomTip();
  document.getElementById('overlay').classList.add('show');
  document.getElementById('buyBtn').onclick = () => window.open(opt.url, '_blank');
  playVoice("And the winner is...");
}

function closeModal() {
  document.getElementById('overlay').classList.remove('show');
}

document.getElementById('closeModal').addEventListener('click', closeModal);
document.getElementById('overlay').addEventListener('click', e => {
  if (e.target === document.getElementById('overlay')) closeModal();
});
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });
document.getElementById('spinAgainBtn').addEventListener('click', () => { closeModal(); spin(); });

/* ===== Tips ===== */
function randomTip() { return tips[Math.floor(Math.random() * tips.length)]; }

let tipInterval;
function startTipCycle() {
  const el = document.getElementById('tipText');
  el.textContent = randomTip();
  if (tipInterval) clearInterval(tipInterval);
  tipInterval = setInterval(() => {
    el.style.opacity = 0;
    setTimeout(() => { el.textContent = randomTip(); el.style.opacity = 1; }, 300);
  }, 5000);
}

/* ===== Boot Grid ===== */
function buildOptionsUI() {
  const container = document.getElementById('options');
  container.innerHTML = '';
  const vals = options.map(o => o.currentPrice);
  const max = Math.max(...vals), min = Math.min(...vals);

  options.forEach(o => {
    const div = document.createElement('div');
    div.className = 'option';
    div.setAttribute('title', `Updated: ${o.updated}`);

    const tier = o.currentPrice >= max * 0.85 ? 'Top shelf'
               : o.currentPrice <= min * 1.05 ? 'Budget pick'
               : 'Mid tier';

    const priceChange = o.originalPrice
      ? `<span class="price-up">â†‘ was $${o.originalPrice.toFixed(2)}</span>`
      : `<span class="price-same">no change recorded</span>`;

    div.innerHTML = `
      <img src="${o.img}" alt="${o.label}" loading="lazy">
      <div class="optMeta">
        <div class="optTitle">${o.label}</div>
        <div class="optPrice">${o.priceDisplay}</div>
        ${priceChange}
        <span class="badge${o.discontinued ? ' disc' : ''}">${o.discontinued ? 'Discontinued' : tier}</span>
      </div>`;

    div.addEventListener('click', () => window.open(o.url, '_blank'));
    container.appendChild(div);
  });
}

/* ===== Lights ===== */
function startLights() {
  const lights = document.getElementById('lights');
  lights.innerHTML = '';
  for (let i = 0; i < 22; i++) {
    const b = document.createElement('div');
    b.className = 'bulb';
    lights.appendChild(b);
  }
  setInterval(() => {
    document.querySelectorAll('.bulb').forEach(b => {
      const on = Math.random() > 0.55;
      b.style.background = on ? '#ffd166' : '#1a2535';
      b.style.boxShadow = on ? '0 0 8px 2px rgba(255,209,102,0.5)' : 'none';
    });
  }, 450);
}

/* ===== Voice ===== */
function playVoice(line) {
  if (!window.speechSynthesis) return;
  const u = new SpeechSynthesisUtterance(line);
  u.rate = 1; u.pitch = 1;
  window.speechSynthesis.speak(u);
}

/* ===== Wire up ===== */
document.getElementById('spinBtn').addEventListener('click', spin);
canvas.addEventListener('click', () => {
  if (!spinning) {
    const o = options[getSelectedIndex()];
    if (o) window.open(o.url, '_blank');
  }
});

animate();
buildOptionsUI();
startLights();
startTipCycle();
</script>
</body>
</html>
