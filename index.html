<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>YOU STILL OWE ME A GIFT — Gameshow</title>
<style>
:root{
  --bg:#031021; --card:#0e1724; --accent:#ffd166; --muted:#b6c0cc;
}
*{box-sizing:border-box;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;}
body{margin:0;min-height:100vh;background:linear-gradient(180deg,#02101a,#071428);color:#eef6ff;display:flex;align-items:center;justify-content:center;padding:20px;}
.wrap{width:100%;max-width:1100px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:18px;box-shadow:0 14px 40px rgba(2,6,23,0.75);}
header{display:flex;align-items:center;gap:12px;margin-bottom:14px}
header h1{margin:0;font-size:20px}
.stage{display:flex;gap:18px;align-items:flex-start;flex-wrap:wrap}
#stageLeft{flex:0 1 520px;display:flex;flex-direction:column;align-items:center}
canvas{border-radius:12px;display:block;box-shadow:0 10px 28px rgba(0,0,0,0.6)}
#spinBtn{margin-top:12px;padding:12px 20px;border-radius:10px;border:0;background:var(--accent);color:#031018;font-weight:800;cursor:pointer}
#spinBtn:active{transform:translateY(1px)}
#lights{width:100%;height:8px;margin-top:12px;display:flex;gap:6px;justify-content:center;align-items:center}
.bulb{width:12px;height:12px;border-radius:50%;background:#222}
.right{flex:1;min-width:300px}
.hostLine{font-weight:700;color:#ffe; margin-bottom:8px}
.info{color:var(--muted);font-size:13px;margin-bottom:10px}
.options{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px}
.option{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:10px;padding:8px;display:flex;gap:8px;align-items:center;cursor:pointer;border:1px solid rgba(255,255,255,0.02);transition:transform .12s}
.option:hover{transform:translateY(-6px)}
.option img{width:56px;height:56px;object-fit:cover;border-radius:8px;flex-shrink:0}
.optMeta{display:flex;flex-direction:column}
.optTitle{font-weight:700;font-size:13px}
.optPrice{color:var(--muted);font-size:12px}
.badge{font-size:11px;padding:4px 8px;border-radius:999px;background:rgba(255,255,255,0.03);color:var(--muted);margin-left:6px}
.modal{position:fixed;left:50%;top:50%;transform:translate(-50%,-50%) scale(.95);min-width:320px;background:#071428;border-radius:12px;padding:18px;box-shadow:0 26px 80px rgba(2,6,23,0.9);z-index:60;display:none;align-items:center;gap:12px;}
.modal.show{display:flex;flex-direction:column;animation:pop .28s cubic-bezier(.2,.9,.2,1) forwards}
@keyframes pop{from{opacity:0;transform:translate(-50%,-50%) scale(.92)} to{opacity:1;transform:translate(-50%,-50%) scale(1)}}
.modal img{width:160px;height:120px;object-fit:cover;border-radius:8px}
.modal h2{margin:0;font-size:18px}
.row{display:flex;gap:10px;align-items:center}
.btn{padding:8px 12px;border-radius:8px;border:0;cursor:pointer}
.btn.primary{background:var(--accent);color:#071018;font-weight:800}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
footer{margin-top:14px;color:var(--muted);font-size:12px;text-align:center}
@media(max-width:900px){.stage{flex-direction:column;align-items:center} #stageLeft{width:100%} .right{width:100%}}
</style>
</head>
<body>
<div class="wrap" role="application" aria-label="Boot Gameshow">
  <header>
    <h1>YOU STILL OWE ME A GIFT — The Boot Spinning Gameshow</h1>
    <div style="margin-left:auto;color:var(--muted);font-size:13px">Hosted by: Snarky ROBOT</div>
  </header>

  <div class="stage">
    <div id="stageLeft" aria-hidden="false">
      <div id="lights" aria-hidden="true"></div>
      <canvas id="wheel" width="480" height="480" aria-label="Spin wheel"></canvas>
      <button id="spinBtn" aria-controls="wheel">SPIN THE WHEEL</button>
    </div>

    <div class="right">
      <div class="hostLine" id="hostLine">Hey — since you took 4 YEARS, welcome to the show.</div>
      <div class="info">When the wheel stops, click BUY to open the product page (avoids popup blockers).</div>

      <div id="options" class="options" aria-live="polite"></div>
      <div style="height:10px"></div>
      <div class="info">Popups show helpful tips, roasts, and one cheeky insult.</div>
    </div>
  </div>

  <footer>
    <a href="https://logwork.com/countdown-timer" 
       class="countdown-timer" 
       data-timezone="America/New_York" 
       data-textcolor="#ffffff" 
       data-date="2025-11-30 18:57">
       Sales End!
    </a>
    <script src="https://cdn.logwork.com/widget/countdown.js" defer></script>
  </footer>
</div>

<div id="winnerModal" class="modal" role="dialog" aria-modal="true">
  <div style="display:flex;gap:12px;align-items:center">
    <img id="winImg" src="" alt="Winner image" />
    <div>
      <h2 id="winTitle">WINNER</h2>
      <div id="winPrice" style="color:var(--muted);font-size:13px"></div>
      <div id="tipText" style="margin-top:6px;font-size:12px;color:var(--accent)"></div>
    </div>
  </div>
  <div style="display:flex;gap:8px;margin-top:12px">
    <button class="btn primary" id="buyBtn">BUY</button>
    <button class="btn ghost" id="spinAgainBtn">SPIN AGAIN</button>
  </div>
</div>

<script>
const options = [
  { label: "Baobab – Bronco Brown", price: "$199.99", img: "assets/baobab.jpg", url: "https://jimgreenfootwear.com/store/baobab-boot-bronco/?attribute_pa_size=12", value:199.99 },
  { label: "African Ranger – Leather Midsole – Bronco Brown", price: "$169.99", img: "assets/ar-bronco-leather.jpg", url: "https://jimgreenfootwear.com/store/african-ranger-bronco-leather-midsole/?attribute_pa_size=12", value:169.99 },
  { label: "African Ranger – Leather Midsole – Houston Brown", price: "$155.99", img: "assets/ar-houston-leather.jpg", url: "https://jimgreenfootwear.com/store/african-ranger-houston-brown-leather-midsole/?attribute_pa_size=12", value:155.99 },
  { label: "African Ranger – Bronco Brown (Tyre Wedge)", price: "$155.99", img: "assets/ar-tyre.jpg", url: "https://jimgreenfootwear.com/store/african-ranger-tyre-wedge-bronco/?attribute_pa_size=12", value:155.99 },
  { label: "719 – Frog Grip Sole – Bronco Brown", price: "$129.99", img: "assets/719-frog.jpg", url: "https://jimgreenfootwear.com/store/719-bronco/", value:129.99 },
  { label: "719 – Tyre Wedge – Bronco Brown", price: "$129.99", img: "assets/719-tyre.jpg", url: "https://jimgreenfootwear.com/store/719-bronco-brown-tyre-wedge/", value:129.99 },
  { label: "African Ranger – Buffalo Skin", price: "$240.00", img: "assets/ar-buffalo.jpg", url: "https://jimgreenfootwear.com/store/african-ranger-buffalo-skin/", value:240.00 },
  { label: "African Ranger – Leather Midsole – Buffalo", price: "$240.00", img: "assets/ar-buffalo-leather.jpg", url: "https://jimgreenfootwear.com/store/african-ranger-buffalo-leather-midsole/", value:240.00 }
];

// --- Audio ---
const audioCtx = new (window.AudioContext||window.webkitAudioContext)();
function playDing(){
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.connect(gain); gain.connect(audioCtx.destination);
  osc.type = 'triangle';
  osc.frequency.setValueAtTime(880, audioCtx.currentTime);
  gain.gain.setValueAtTime(0.06, audioCtx.currentTime);
  osc.start();
  osc.frequency.exponentialRampToValueAtTime(660, audioCtx.currentTime + 0.25);
  gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.25);
  osc.stop(audioCtx.currentTime + 0.3);
}

function speakHostLine(text){
  if('speechSynthesis' in window){
    const msg = new SpeechSynthesisUtterance(text);
    msg.lang='en-US'; msg.rate=1; msg.pitch=1.1;
    window.speechSynthesis.speak(msg);
  }
}

// --- Host voice lines ---
const spinLines = [
  "Alright, here we go!",
  "Let's see what fate has in store!",
  "Brace yourselves, the wheel spins for glory!",
  "Hold onto your boots!",
  "Time to make the magic happen!"
];

const roastLines = [
  "Better luck next time, cheapskate!",
  "Ouch, that's gotta sting!",
  "Are you even trying?",
  "You call that a choice?",
  "Ha! Maybe next round!"
];

const jokeLines = [
  "Tip: Socks are optional, confidence is not!",
  "Remember, shoes won't buy happiness, but they come close!",
  "Host says: Don't forget to stretch before dancing!",
  "Warning: Side effects may include sudden style upgrades!"
];

// --- Wheel ---
const canvas = document.getElementById('wheel');
const ctx = canvas.getContext('2d');
const cx = canvas.width/2, cy = canvas.height/2;
const outerR = Math.min(cx, cy) - 8;
const innerR = 54;
let angle = 0;
let angularVelocity = 0;
let spinning = false;
const friction = 0.985; // slightly faster stop
const colors = ["#c0392b","#e67e22","#f1c40f","#2ecc71","#1abc9c","#3498db","#9b59b6","#e84393"];

const images = [];
options.forEach((o,i)=>{
  images[i] = new Image();
  images[i].src = o.img;
});

function drawWheel(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const len = options.length;
  const arc = Math.PI*2 / len;
  const maxVal = Math.max(...options.map(o=>o.value));
  for(let i=0;i<len;i++){
    const start = angle + i*arc;
    ctx.beginPath();
    ctx.moveTo(cx,cy);
    ctx.arc(cx,cy,outerR,start,start+arc);
    ctx.closePath();
    const intensity = 0.85 + (options[i].value/maxVal)*0.6;
    ctx.fillStyle = colors[i % colors.length];
    ctx.globalAlpha = intensity;
    ctx.fill();
    ctx.globalAlpha = 1;

    ctx.beginPath();
    ctx.moveTo(cx,cy);
    ctx.arc(cx,cy,innerR,start,start+arc,true);
    ctx.closePath();
    ctx.globalCompositeOperation = 'destination-out';
    ctx.fill();
    ctx.globalCompositeOperation = 'source-over';

    const mid = start + arc/2;
    ctx.save();
    ctx.translate(cx + Math.cos(mid)*(innerR+outerR)/2*0.7, cy + Math.sin(mid)*(innerR+outerR)/2*0.7);
    ctx.rotate(mid + Math.PI/2);
    ctx.drawImage(images[i], -28, -28, 56, 56);
    ctx.restore();
  }
  ctx.beginPath(); ctx.arc(cx,cy,innerR-8,0,Math.PI*2); ctx.fillStyle="#031018"; ctx.fill();
  ctx.beginPath(); ctx.moveTo(cx, cy - outerR - 6); ctx.lineTo(cx-16, cy - outerR + 18); ctx.lineTo(cx+16, cy - outerR + 18); ctx.closePath(); ctx.fillStyle = "#ffd166"; ctx.fill();
}

function animate(){
  if(spinning){
    angularVelocity *= friction;
    if(Math.abs(angularVelocity)<0.001){ 
      angularVelocity=0; 
      spinning=false; 
      setTimeout(onStop,300);
    }
    angle += angularVelocity;
  }
  drawWheel();
  requestAnimationFrame(animate);
}

function spin(){
  if(spinning) return;
  playDing();
  speakHostLine(spinLines[Math.floor(Math.random()*spinLines.length)]);
  angularVelocity = (0.3 + Math.random()*0.4) * (Math.random()>0.5?1:-1);
  spinning=true;
}

function getSelectedIndex(){
  const len=options.length;
  const normalized=((angle%(Math.PI*2))+Math.PI*2)%(Math.PI*2);
  const arc=Math.PI*2/len;
  const pointer=-Math.PI/2;
  const relative=(pointer-normalized+Math.PI*2)%(Math.PI*2);
  return Math.floor(relative/arc);
}

function onStop(){
  const idx=getSelectedIndex();
  const opt=options[idx];
  if(!opt) return;
  flashSlice(idx);
  announceWinner(opt);
}

function flashSlice(idx){
  const len=options.length;
  const arc=Math.PI*2/len;
  const start=angle+idx*arc;
  ctx.beginPath();
  ctx.moveTo(cx,cy);
  ctx.arc(cx,cy,outerR,start,start+arc);
  ctx.closePath();
  ctx.fillStyle="rgba(255,255,255,0.14)";
  ctx.fill();
  setTimeout(drawWheel,500);
}

const optionsEl=document.getElementById('options');
function buildOptionsUI(){
  optionsEl.innerHTML='';
  const vals=options.map(o=>o.value);
  const max=Math.max(...vals), min=Math.min(...vals);
  options.forEach(o=>{
    const div=document.createElement('div');
    div.className='option';
    const tier = (o.value>=max*0.85)?'High spender':(o.value<=min*1.05?'Bottom dollar':'Mid spend');
    div.innerHTML=`<img src="${o.img}" alt="${o.label}"><div class="optMeta"><div class="optTitle">${o.label}</div><div class="optPrice">${o.price} <span class="badge">${tier}</span></div></div>`;
    div.addEventListener('click',()=>{ 
      showTip(jokeLines[Math.floor(Math.random()*jokeLines.length)]);
      window.open(o.url,'_blank');
    });
    optionsEl.appendChild(div);
  });
}

function showTip(text){
  const tip=document.getElementById('tipText');
  tip.textContent=text;
  setTimeout(()=>{tip.textContent='';},4000);
}

function announceWinner(opt){
  const modal=document.getElementById('winnerModal');
  document.getElementById('winImg').src=opt.img;
  document.getElementById('winTitle').textContent=opt.label;
  document.getElementById('winPrice').textContent=opt.price;
  showTip(roastLines[Math.floor(Math.random()*roastLines.length)]);
  speakHostLine(roastLines[Math.floor(Math.random()*roastLines.length)]);
  modal.classList.add('show');
  document.getElementById('buyBtn').onclick=()=>window.open(opt.url,'_blank');
  document.getElementById('spinAgainBtn').onclick=()=>{modal.classList.remove('show'); spin();};
}

function startLights(){
  const lights=document.getElementById('lights');
  lights.innerHTML='';
  for(let i=0;i<20;i++){const b=document.createElement('div'); b.className='bulb'; lights.appendChild(b);}
  setInterval(()=>{
    const bulbs=document.querySelectorAll('.bulb');
    bulbs.forEach(b=>{
      const active=Math.random()>0.6;
      b.style.background=active?'#ffd166':'#222';
      b.style.boxShadow=active?'0 4px 14px rgba(255,209,102,0.45)':'none';
    });
  },420);
}

document.getElementById('spinBtn').addEventListener('click',()=>{ spin(); });
canvas.addEventListener('click',()=>{ if(!spinning){ const idx=getSelectedIndex(); const o=options[idx]; if(o && o.url) window.open(o.url,'_blank'); }});

animate();
buildOptionsUI();
startLights();
</script>
</body>
</html>
